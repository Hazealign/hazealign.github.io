<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  <!-- (1) Optimize for mobile versions: http://goo.gl/EOpFl -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- (1) force latest IE rendering engine: bit.ly/1c8EiC9 -->
  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  <title>[번역] ButterKnife, 지금까지 고마웠어. Data Binding, 앞으로 잘 부탁해.</title>
  <meta name="description" content="이 글은 @izumin5210님이 Qiita에 올린 글을 번역한 글입니다. 일부 오역이나 의역이 있을 수 있으며 이 부분에 대해서 양해를 부탁드리며, 좋은 글을 한국어로도 번역할 수 있게 해주신 izumin5210님께 감사하다는 말씀 드립니다." />

  <meta name="HandheldFriendly" content="True" />
  <meta name="MobileOptimized" content="320" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@realignist" />
    <meta name="twitter:title" content="[번역] ButterKnife, 지금까지 고마웠어. Data Binding, 앞으로 잘 부탁해." />
    <meta name="twitter:image" content="http://realignist.me/assets/images/pikachu_logo.png" />
    
    <meta name="twitter:description"  content="이 글은 @izumin5210님이 Qiita에 올린 글을 번역한 글입니다. 일부 오역이나 의역이 있을 수 있으며 이 부분에 대해서 양해를 부탁드리며, 좋은 글을 한국어로도 번역할 수 있게 해주신 izumin5210님께 감사하다는 말씀 드립니다." />
    
  
  
  <meta property="og:site_name" content="Haze Lee" />
  <meta property="og:title" content="[번역] ButterKnife, 지금까지 고마웠어. Data Binding, 앞으로 잘 부탁해."/>
  
  <meta property="og:description" content="이 글은 @izumin5210님이 Qiita에 올린 글을 번역한 글입니다. 일부 오역이나 의역이 있을 수 있으며 이 부분에 대해서 양해를 부탁드리며, 좋은 글을 한국어로도 번역할 수 있게 해주신 izumin5210님께 감사하다는 말씀 드립니다." />
  
  <meta property="og:image" content="http://realignist.me/assets/images/pikachu_logo.png" />
  <meta property="og:url" content="http://realignist.me/code/2016/05/25/data-binding-guide.html" >
  <meta property="og:type" content="blog" />
  <meta property="article:published_time" content="2016-05-25T15:00:00+09:00">

  <link rel="canonical" href="http://realignist.me/code/2016/05/25/data-binding-guide.html"/>
  <link rel="shortcut icon" href="/assets/images/favicon.png" type="image/png"/>
  <link rel="stylesheet" href="//brick.a.ssl.fastly.net/Linux+Libertine:400,400i,700,700i/Open+Sans:400,400i,700,700i">
  <link rel="stylesheet" type="text/css" media="screen" href="/css/main.css" />
  <link rel="stylesheet" type="text/css" media="screen" href="/assets/css/font-awesome.css" />
  <link rel="stylesheet" type="text/css" media="print" href="/css/print.css" />
  <link rel="stylesheet" type="text/css" media="print" href="/css/prism.css" />

  
    <link rel="amphtml" href="http://realignist.me/amp/code/2016/05/25/data-binding-guide">
  

  <style type="text/css">
    
code[class*="language-"],
pre[class*="language-"] {
  color: black;
  background: none;
  text-shadow: 0 1px white;
  font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  text-align: left;
  white-space: pre;
  word-spacing: normal;
  word-break: normal;
  word-wrap: normal;
  line-height: 1.5;

  -moz-tab-size: 4;
  -o-tab-size: 4;
  tab-size: 4;

  -webkit-hyphens: none;
  -moz-hyphens: none;
  -ms-hyphens: none;
  hyphens: none;
}

pre[class*="language-"]::-moz-selection, pre[class*="language-"] ::-moz-selection,
code[class*="language-"]::-moz-selection, code[class*="language-"] ::-moz-selection {
  text-shadow: none;
  background: #b3d4fc;
}

pre[class*="language-"]::selection, pre[class*="language-"] ::selection,
code[class*="language-"]::selection, code[class*="language-"] ::selection {
  text-shadow: none;
  background: #b3d4fc;
}

@media print {
  code[class*="language-"],
  pre[class*="language-"] {
    text-shadow: none;
  }
}

/* Code blocks */
pre[class*="language-"] {
  padding: 1em;
  margin: .5em 0;
  overflow: auto;
}

:not(pre) > code[class*="language-"],
pre[class*="language-"] {
  background: #f5f2f0;
}

/* Inline code */
:not(pre) > code[class*="language-"] {
  padding: .1em;
  border-radius: .3em;
  white-space: normal;
}

.token.comment,
.token.prolog,
.token.doctype,
.token.cdata {
  color: slategray;
}

.token.punctuation {
  color: #999;
}

.namespace {
  opacity: .7;
}

.token.property,
.token.tag,
.token.boolean,
.token.number,
.token.constant,
.token.symbol,
.token.deleted {
  color: #905;
}

.token.selector,
.token.attr-name,
.token.string,
.token.char,
.token.builtin,
.token.inserted {
  color: #690;
}

.token.operator,
.token.entity,
.token.url,
.language-css .token.string,
.style .token.string {
  color: #a67f59;
  background: hsla(0, 0%, 100%, .5);
}

.token.atrule,
.token.attr-value,
.token.keyword {
  color: #07a;
}

.token.function {
  color: #DD4A68;
}

.token.regex,
.token.important,
.token.variable {
  color: #e90;
}

.token.important,
.token.bold {
  font-weight: bold;
}
.token.italic {
  font-style: italic;
}

.token.entity {
  cursor: help;
}

  </style>
</head>

  <body itemscope itemtype="http://schema.org/Article">
    <!-- header start -->

<!-- header end -->

    <main class="content" role="main">
      <article class="post">
        
        <div class="noarticleimage">
          <div class="post-meta">
            <h1 class="post-title">[번역] ButterKnife, 지금까지 고마웠어. Data Binding, 앞으로 잘 부탁해.</h1>
            <div class="cf post-meta-text">
              <div class="author-image" style="background-image: url(/assets/images/author.jpg)">Blog Logo</div>
              <h4 class="author-name" itemprop="author" itemscope itemtype="http://schema.org/Person"></h4>
              on
              <time datetime="2016-05-25T15:00:00+09:00">25 May 2016</time>
              <!-- , tagged on <span class="post-tag-">, <a href="/tag/"></a></span> -->
            </div>
          </div>
        </div>
        <br>
        <br>
        <br>
        
        <section class="post-content">
          <div class="post-reading">
            <span class="post-reading-time"></span> read
          </div>
          <a name="topofpage"></a>
          <p>이 글은 @izumin5210님이 Qiita에 올린 <a href="http://qiita.com/izumin5210/items/2784576d86ce6b9b51e6">글</a>을 번역한 글입니다. 일부 오역이나 의역이 있을 수 있으며 이 부분에 대해서 양해를 부탁드리며, 좋은 글을 한국어로도 번역할 수 있게 해주신 izumin5210님께 감사하다는 말씀 드립니다.</p>

<h2 id="butterknife--">ButterKnife, 지금까지 고마웠어.</h2>

<p>어떤 어플리케이션의 master 브랜치에 <a href="http://jakewharton.github.io/butterknife/">ButterKnife</a>로 되어있던 부분을 없애는 Pull Request를 머지했다.</p>

<p><img src="http://realignist.me/assets/images/20160525/5.png" alt="" /></p>

<p>지금까지 ButterKnife가 하고 있던 일은 전부 <a href="http://developer.android.com/tools/data-binding/guide.html">Data Binding</a>이 대신 하게 되었다. Data Binding은 공식에서는 아직 beta release 단계에 있는 상태로, <a href="https://bintray.com/android/android-tools">거의 1.0에 가까운 RC(Release Candidate) 수준</a>까지 되었기 때문에 실전에 투입할 수 있게 되었다.</p>

<p>실행할 때에 Reflection을 하는 ButterKnife와는 달리 Data Binding은 Annotation Processing으로 사전에 이것저것 해주는 방식이 좋았다. (c.f. ButterKnife도 Annotation Processing을 하는 방식으로 바뀌는 것 같다. -&gt; <a href="https://github.com/JakeWharton/butterknife/pull/323">Split the compiler and runtime into separate artifacts. by serj-lotutovici · Pull Request #323 · JakeWharton/butterknife</a>)</p>

<p>“Data Binding으로 ButterKnife를 대체할 수 있다!”라고 말하는 사람들은 많지만 실제 사례를 별로 본 적이 없는 것 같아서 여기에 소개해두도록 하겠다.</p>

<h2 id="yet-another-butterknife-data-binding">Yet Another ButterKnife로의 Data Binding</h2>

<h3 id="view-binding">View Binding</h3>

<h4 id="before">Before</h4>

<p>아마 모두들 ButterKnife에서 제일 원하고 있는 기능, <code class="highlighter-rouge">findViewById(int id)</code>가 필요 없어지는 다음과 같은 코드</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">class</span> <span class="nc">ExampleActivity</span> <span class="kd">extends</span> <span class="n">Activity</span> <span class="o">{</span>
  <span class="nd">@Bind</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">title</span><span class="o">)</span> <span class="n">TextView</span> <span class="n">title</span><span class="o">;</span>
  <span class="nd">@Bind</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">subtitle</span><span class="o">)</span> <span class="n">TextView</span> <span class="n">subtitle</span><span class="o">;</span>
  <span class="nd">@Bind</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">footer</span><span class="o">)</span> <span class="n">TextView</span> <span class="n">footer</span><span class="o">;</span>

  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onCreate</span><span class="o">(</span><span class="n">Bundle</span> <span class="n">savedInstanceState</span><span class="o">)</span> <span class="o">{</span>
    <span class="kd">super</span><span class="o">.</span><span class="na">onCreate</span><span class="o">(</span><span class="n">savedInstanceState</span><span class="o">);</span>
    <span class="n">setContentView</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">layout</span><span class="o">.</span><span class="na">simple_activity</span><span class="o">);</span>
    <span class="n">ButterKnife</span><span class="o">.</span><span class="na">bind</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<p>이 부분은 전부 Data Binding으로 다음과 같이 바꿔서 사용할 수 있다.</p>

<h4 id="after">After</h4>

<p>레이아웃 전체를 <code class="highlighter-rouge">&lt;layout&gt;&lt;/layout&gt;</code>으로 감싸준다.</p>

<figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;layout&gt;</span>
  <span class="nt">&lt;LinearLayout&gt;</span>
    <span class="nt">&lt;TextView</span> <span class="na">android:id=</span><span class="s">"@+id/title"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;TextView</span> <span class="na">android:id=</span><span class="s">"@+id/subtitle"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;TextView</span> <span class="na">android:id=</span><span class="s">"@+id/footer"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;/LinearLayout&gt;</span>
<span class="nt">&lt;/layout&gt;</span></code></pre></figure>

<p>이렇게 하면 <code class="highlighter-rouge">activity_sample.xml</code> 파일이라고 한다면 <code class="highlighter-rouge">ActivitySampleBinding</code>이라는 클래스가 생성된다.<code class="highlighter-rouge">DataBindingUtils.setContentView(Activity activity, int id)</code>를 통해 Binding 인스턴스를 반환하기 때문에 이 인스턴스를 유지해두면 좋다.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">class</span> <span class="nc">ExampleActivity</span> <span class="kd">extends</span> <span class="n">Activity</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="n">ActivitySampleBinding</span> <span class="n">binding</span><span class="o">;</span>

  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onCreate</span><span class="o">(</span><span class="n">Bundle</span> <span class="n">savedInstanceState</span><span class="o">)</span> <span class="o">{</span>
    <span class="kd">super</span><span class="o">.</span><span class="na">onCreate</span><span class="o">(</span><span class="n">savedInstanceState</span><span class="o">);</span>
    <span class="n">binding</span> <span class="o">=</span> <span class="n">DataBindingUtils</span><span class="o">.</span><span class="na">setContentView</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="n">R</span><span class="o">.</span><span class="na">layout</span><span class="o">.</span><span class="na">simple_activity</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<p>이 Binding 인스턴스가 id로 설정된 각 View의 인스턴스를 가지고 있는걸 확인할 수 있다.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">String</span> <span class="n">text</span> <span class="o">=</span> <span class="n">binding</span><span class="o">.</span><span class="na">footer</span><span class="o">.</span><span class="na">getText</span><span class="o">();</span></code></pre></figure>

<h3 id="non-activity-binding">Non-Activity Binding</h3>

<h4 id="before-1">Before</h4>

<p>Activity 뿐만이 아니라, 예를 들면 Fragment에서의 View Binding.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">FancyFragment</span> <span class="kd">extends</span> <span class="n">Fragment</span> <span class="o">{</span>
  <span class="nd">@Bind</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">button1</span><span class="o">)</span> <span class="n">Button</span> <span class="n">button1</span><span class="o">;</span>
  <span class="nd">@Bind</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">button2</span><span class="o">)</span> <span class="n">Button</span> <span class="n">button2</span><span class="o">;</span>

  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="n">View</span> <span class="nf">onCreateView</span><span class="o">(</span><span class="n">LayoutInflater</span> <span class="n">inflater</span><span class="o">,</span> <span class="n">ViewGroup</span> <span class="n">container</span><span class="o">,</span> <span class="n">Bundle</span> <span class="n">savedInstanceState</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">View</span> <span class="n">view</span> <span class="o">=</span> <span class="n">inflater</span><span class="o">.</span><span class="na">inflate</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">layout</span><span class="o">.</span><span class="na">fancy_fragment</span><span class="o">,</span> <span class="n">container</span><span class="o">,</span> <span class="kc">false</span><span class="o">);</span>
    <span class="n">ButterKnife</span><span class="o">.</span><span class="na">bind</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="n">view</span><span class="o">);</span>
    <span class="c1">// TODO Use fields...</span>
    <span class="k">return</span> <span class="n">view</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<h4 id="after-1">After</h4>

<p>생성된 Binding 클래스에 <code class="highlighter-rouge">bind(View view)</code>라는 정적 메소드가 존재하기 때문에, 그것을 이용하면 된다. 그 다음은 같다.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">FancyFragment</span> <span class="kd">extends</span> <span class="n">Fragment</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="n">FragmentFancyBinding</span> <span class="n">binding</span><span class="o">;</span>

  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="n">View</span> <span class="nf">onCreateView</span><span class="o">(</span><span class="n">LayoutInflater</span> <span class="n">inflater</span><span class="o">,</span> <span class="n">ViewGroup</span> <span class="n">container</span><span class="o">,</span> <span class="n">Bundle</span> <span class="n">savedInstanceState</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">inflater</span><span class="o">.</span><span class="na">inflate</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">layout</span><span class="o">.</span><span class="na">fragment_fancy</span><span class="o">,</span> <span class="n">container</span><span class="o">,</span> <span class="kc">false</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onActivityCreated</span><span class="o">(</span><span class="n">Bundle</span> <span class="n">savedInstanceState</span><span class="o">)</span> <span class="o">{</span>
    <span class="kd">super</span><span class="o">.</span><span class="na">onActivityCreated</span><span class="o">(</span><span class="n">savedInstanceState</span><span class="o">);</span>
    <span class="n">binding</span> <span class="o">=</span> <span class="n">FragmentFancyBinding</span><span class="o">.</span><span class="na">bind</span><span class="o">(</span><span class="n">getView</span><span class="o">());</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<h3 id="view-binding-viewholder">View Binding (ViewHolder)</h3>

<h4 id="before-2">Before</h4>

<p>ButterKnife를 이용하면 <code class="highlighter-rouge">ListView</code>를 위한 <code class="highlighter-rouge">ViewHolder</code>의 구현을 쉽게 할 수 있다.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyAdapter</span> <span class="kd">extends</span> <span class="n">BaseAdapter</span> <span class="o">{</span>
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="n">View</span> <span class="nf">getView</span><span class="o">(</span><span class="kt">int</span> <span class="n">position</span><span class="o">,</span> <span class="n">View</span> <span class="n">view</span><span class="o">,</span> <span class="n">ViewGroup</span> <span class="n">parent</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">ViewHolder</span> <span class="n">holder</span><span class="o">;</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">view</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">holder</span> <span class="o">=</span> <span class="o">(</span><span class="n">ViewHolder</span><span class="o">)</span> <span class="n">view</span><span class="o">.</span><span class="na">getTag</span><span class="o">();</span>
    <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
      <span class="n">view</span> <span class="o">=</span> <span class="n">inflater</span><span class="o">.</span><span class="na">inflate</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">layout</span><span class="o">.</span><span class="na">list_item_sample</span><span class="o">,</span> <span class="n">parent</span><span class="o">,</span> <span class="kc">false</span><span class="o">);</span>
      <span class="n">holder</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ViewHolder</span><span class="o">(</span><span class="n">view</span><span class="o">);</span>
      <span class="n">view</span><span class="o">.</span><span class="na">setTag</span><span class="o">(</span><span class="n">holder</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="n">holder</span><span class="o">.</span><span class="na">name</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span><span class="s">"John Doe"</span><span class="o">);</span>
    <span class="c1">// etc...</span>

    <span class="k">return</span> <span class="n">view</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="kd">static</span> <span class="kd">class</span> <span class="nc">ViewHolder</span> <span class="o">{</span>
    <span class="nd">@Bind</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">title</span><span class="o">)</span> <span class="n">TextView</span> <span class="n">name</span><span class="o">;</span>
    <span class="nd">@Bind</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">job_title</span><span class="o">)</span> <span class="n">TextView</span> <span class="n">jobTitle</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">ViewHolder</span><span class="o">(</span><span class="n">View</span> <span class="n">view</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">ButterKnife</span><span class="o">.</span><span class="na">bind</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="n">view</span><span class="o">);</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<h4 id="after-listview">After (ListView)</h4>

<p>Data Binding을 이용하면 Binding 클래스가 ViewHolder와 같은 방식으로 작동하므로, 원래 <code class="highlighter-rouge">ViewHolder</code>가 필요 없어진다. (<code class="highlighter-rouge">RecyclerView</code>에 대해서는 조금 다른 이야기가 되기 때문에 후술하도록 하겠다.) Data Binding을 이용하고 있으면 setter 또한 구현 되어있기 때문에 각 View에 값을 일일히 줄 필요도 없다. (Snippet 안에 있는 주석을 참조하라.)</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyAdapter</span> <span class="kd">extends</span> <span class="n">BaseAdapter</span> <span class="o">{</span>
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="n">View</span> <span class="nf">getView</span><span class="o">(</span><span class="kt">int</span> <span class="n">position</span><span class="o">,</span> <span class="n">View</span> <span class="n">convertView</span><span class="o">,</span> <span class="n">ViewGroup</span> <span class="n">parent</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">ListItemSampleBinding</span> <span class="n">binding</span><span class="o">;</span>
      <span class="k">if</span> <span class="o">(</span><span class="n">convertView</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
          <span class="n">binding</span> <span class="o">=</span> <span class="n">DataBindingUtil</span><span class="o">.</span><span class="na">inflate</span><span class="o">(</span><span class="n">inflater</span><span class="o">,</span> <span class="n">R</span><span class="o">.</span><span class="na">layout</span><span class="o">.</span><span class="na">list_item_sample</span><span class="o">,</span> <span class="n">parent</span><span class="o">,</span> <span class="kc">false</span><span class="o">);</span>
          <span class="n">convertView</span> <span class="o">=</span> <span class="n">binding</span><span class="o">.</span><span class="na">getRoot</span><span class="o">();</span>
          <span class="n">convertView</span><span class="o">.</span><span class="na">setTag</span><span class="o">(</span><span class="n">binding</span><span class="o">);</span>
      <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
          <span class="n">binding</span> <span class="o">=</span> <span class="o">(</span><span class="n">ListItemSampleBinding</span><span class="o">)</span> <span class="n">convertView</span><span class="o">.</span><span class="na">getTag</span><span class="o">();</span>
      <span class="o">}</span>

			<span class="c1">// 예를 들면 User의 리스트라면 항목 별로 지정하는게 아니라 User의 인스턴스를 바로 지정할 수 있다.</span>
    
      <span class="n">binding</span><span class="o">.</span><span class="na">setUser</span><span class="o">(</span><span class="n">getItem</span><span class="o">(</span><span class="n">position</span><span class="o">));</span>
      <span class="c1">// binding.name.setText("John Doe");</span>

      <span class="k">return</span> <span class="n">convertView</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<h4 id="after-recyclerview">After (RecyclerView)</h4>

<p><code class="highlighter-rouge">RecyclerView</code>같은 경우에는 <code class="highlighter-rouge">RecyclerView.ViewHolder</code>가 필수가 된다. 이 ViewHolder에 BindingHolder같은 이름을 붙이고 Binding 클래스와 연결해주도록 하면 된다.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">SampleRecyclerAdapter</span> <span class="kd">extends</span> <span class="n">RecyclerView</span><span class="o">.</span><span class="na">Adapter</span><span class="o">&lt;</span><span class="n">SampleRecyclerAdapter</span><span class="o">.</span><span class="na">BindingHolder</span><span class="o">&gt;</span> <span class="o">{</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">RegisterableDeviceListAdapter</span><span class="o">.</span><span class="na">ViewHolder</span> <span class="nf">onCreateViewHolder</span><span class="o">(</span><span class="n">ViewGroup</span> <span class="n">parent</span><span class="o">,</span> <span class="kt">int</span> <span class="n">viewType</span><span class="o">)</span> <span class="o">{</span>
      <span class="kd">final</span> <span class="n">View</span> <span class="n">v</span> <span class="o">=</span> <span class="n">LayoutInflater</span><span class="o">.</span><span class="na">from</span><span class="o">(</span><span class="n">parent</span><span class="o">.</span><span class="na">getContext</span><span class="o">()).</span><span class="na">inflate</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">layout</span><span class="o">.</span><span class="na">list_item_sample</span><span class="o">,</span> <span class="n">parent</span><span class="o">,</span> <span class="kc">false</span><span class="o">);</span>
      <span class="k">return</span> <span class="k">new</span> <span class="nf">BindingHolder</span><span class="o">(</span><span class="n">v</span><span class="o">);</span>
    <span class="o">}</span>

  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onBindViewHolder</span><span class="o">(</span><span class="n">BindingHolder</span> <span class="n">holder</span><span class="o">,</span> <span class="kt">int</span> <span class="n">position</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// BindingHolder#getBinding()がViewDataBindingを返すのでsetVariable()を呼んでいる</span>
    <span class="c1">// 専用のBinding（この場合だとListItemSampleBinding）を返すことが出来るなら普通にsetUser()でOK</span>
    <span class="n">holder</span><span class="o">.</span><span class="na">getBinding</span><span class="o">().</span><span class="na">setVariable</span><span class="o">(</span><span class="n">BR</span><span class="o">.</span><span class="na">user</span><span class="o">,</span> <span class="n">getItem</span><span class="o">(</span><span class="n">position</span><span class="o">));</span>
  <span class="o">}</span>

  <span class="kd">static</span> <span class="kd">class</span> <span class="nc">BindingHolder</span> <span class="kd">extends</span> <span class="n">RecyclerView</span><span class="o">.</span><span class="na">ViewHolder</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">ViewDataBinding</span> <span class="n">binding</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">BindingHolder</span><span class="o">(</span><span class="n">View</span> <span class="n">itemView</span><span class="o">)</span> <span class="o">{</span>
      <span class="kd">super</span><span class="o">(</span><span class="n">itemView</span><span class="o">);</span>
      <span class="n">binding</span> <span class="o">=</span> <span class="n">DataBindingUtil</span><span class="o">.</span><span class="na">bind</span><span class="o">(</span><span class="n">itemView</span><span class="o">)</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="n">ViewDataBinding</span> <span class="nf">getBinding</span><span class="o">()</span> <span class="o">{</span>
      <span class="k">return</span> <span class="n">binding</span><span class="o">;</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<h3 id="listener-binding-onclick">Listener Binding (onClick)</h3>

<h4 id="before-3">Before</h4>

<p><code class="highlighter-rouge">@OnClick</code>이나 <code class="highlighter-rouge">@OnItemClick</code> 등의 어노테이션을 사용하는걸 통해 <code class="highlighter-rouge">setOnClickListener()</code>를 지정해주는 것과 비슷한 것을 할 수 있습니다.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nd">@OnClick</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">submit</span><span class="o">)</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">submit</span><span class="o">(</span><span class="n">View</span> <span class="n">view</span><span class="o">)</span> <span class="o">{</span>
  <span class="c1">// TODO submit data to server...</span>
<span class="o">}</span></code></pre></figure>

<h4 id="after-2">After</h4>

<p>레이아웃에 Activity의 인스턴스를 지정해주고, <code class="highlighter-rouge">Button</code>의 <code class="highlighter-rouge">android:onClick</code> 항목에 Listener 메소드를 지정해준다.</p>

<figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;layout&gt;</span>
  <span class="nt">&lt;data&gt;</span>
    <span class="nt">&lt;variable</span> <span class="na">name=</span><span class="s">"activity"</span> <span class="na">type=</span><span class="s">"info.izumin.android.databindingsample.SampleActivity"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/data&gt;</span>
  <span class="nt">&lt;LinearLayout&gt;</span>
    <span class="nt">&lt;Button</span> <span class="na">android:onClick=</span><span class="s">"@{activity.onSampleButtonClick}"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;/LinearLayout&gt;</span>
<span class="nt">&lt;/layout&gt;</span></code></pre></figure>

<p>Activity의 <code class="highlighter-rouge">onCreate()</code>에서는 Binding 인스턴스에 Activity의 인스턴스를 지정해주면 그 이후에는 편하게 사용할 수 있다.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">class</span> <span class="nc">SampleActivity</span> <span class="kd">extends</span> <span class="n">Activity</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="n">ActivitySampleBinding</span> <span class="n">binding</span><span class="o">;</span>

  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onCreate</span><span class="o">(</span><span class="n">Bundle</span> <span class="n">savedInstanceState</span><span class="o">)</span> <span class="o">{</span>
    <span class="kd">super</span><span class="o">.</span><span class="na">onCreate</span><span class="o">(</span><span class="n">savedInstanceState</span><span class="o">);</span>
    <span class="n">binding</span> <span class="o">=</span> <span class="n">DataBindingUtils</span><span class="o">.</span><span class="na">setContentView</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="n">R</span><span class="o">.</span><span class="na">layout</span><span class="o">.</span><span class="na">simple_activity</span><span class="o">);</span>
    <span class="n">binding</span><span class="o">.</span><span class="na">setActivity</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onSampleButtonClick</span><span class="o">(</span><span class="n">View</span> <span class="n">view</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// do something...</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<p>다만, 앞의 예제의 Activity는 Layout를 참고하고 있으며 Layout은 Activity를 참조하고 있는 것처럼 완전히 서로 결합되는 구조가 된다. 이것이 싫다면 이벤트 처리만을 담당하는 Interface를 만들어주면 좋다. 이제 느슨하게 서로 연결되는 구조가 실현된다.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">interface</span> <span class="nc">SampleActivityHandlers</span> <span class="o">{</span>
  <span class="kt">void</span> <span class="nf">onSampleButtonClick</span><span class="o">(</span><span class="n">View</span> <span class="n">view</span><span class="o">);</span>
<span class="o">}</span></code></pre></figure>

<p><a href="http://blog.8thlight.com/uncle-bob/2012/08/13/the-clean-architecture.html">Clean Architecture</a>에서 이야기하는 Controller에 해당될려나?</p>

<h3 id="data-binding--">그 외 Data Binding의 편리한 기능들</h3>

<h4 id="listener-bindings">Listener Bindings</h4>

<p>Data Binding은 <code class="highlighter-rouge">@BindingAdapter</code>나 <code class="highlighter-rouge">@BindingMethod</code>라고 하는 어노테이션을 이용한 어노테이션 프로세싱을 통해 <code class="highlighter-rouge">OnClickListener</code> 이외의 Event Listener도 설정할 수 있다.</p>

<figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;Button</span> <span class="na">android:onClick=</span><span class="s">"@{handlers.onPrevButtonClick}"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;Button</span> <span class="na">android:onClick=</span><span class="s">"@{handlers.onNextButtonClick}"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;EditText</span> <span class="na">android:onTextChanged=</span><span class="s">"@{handlers.onTextChanged}"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;ListView</span> <span class="na">android:onScroll=</span><span class="s">"@{handlers.onScroll}"</span> <span class="nt">/&gt;</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">interface</span> <span class="nc">SampleActivityHandlers</span> <span class="o">{</span>
  <span class="kt">void</span> <span class="nf">onPrevButtonClick</span><span class="o">(</span><span class="n">View</span> <span class="n">view</span><span class="o">);</span>
  <span class="kt">void</span> <span class="nf">onNextButtonClick</span><span class="o">(</span><span class="n">View</span> <span class="n">view</span><span class="o">);</span>
  <span class="kt">void</span> <span class="nf">onTextChanged</span><span class="o">(</span><span class="n">CharSequence</span> <span class="n">s</span><span class="o">,</span> <span class="kt">int</span> <span class="n">start</span><span class="o">,</span> <span class="kt">int</span> <span class="n">before</span><span class="o">,</span> <span class="kt">int</span> <span class="n">count</span><span class="o">);</span>
  <span class="kt">void</span> <span class="nf">onScroll</span><span class="o">(</span><span class="n">AbsListView</span> <span class="n">view</span><span class="o">,</span> <span class="kt">int</span> <span class="n">firstVisibleItem</span><span class="o">,</span> <span class="kt">int</span> <span class="n">visibleItemCount</span><span class="o">,</span> <span class="kt">int</span> <span class="n">totalItemCount</span><span class="o">);</span>
<span class="o">}</span></code></pre></figure>

<p>표준으로 제공하는 Adapter에 대해서는 <a href="https://android.googlesource.com/platform/frameworks/data-binding/+/android-6.0.0_r7/extensions/baseAdapters/src/main/java/android/databinding/adapters">extensions/baseAdapters/…/data-binding/</a>에 있는 파일을 참조하길 바란다.</p>

<h4 id="adapter-binding">Adapter Binding</h4>

<p><code class="highlighter-rouge">@BindingAdapter</code> 및 <code class="highlighter-rouge">@BindingMethod</code>의 악용 사례</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nd">@BindingMethods</span><span class="o">({</span>
    <span class="nd">@BindingMethod</span><span class="o">(</span><span class="n">type</span> <span class="o">=</span> <span class="n">SwipeRefreshLayout</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">attribute</span> <span class="o">=</span> <span class="s">"android:onRefresh"</span><span class="o">,</span> <span class="n">method</span> <span class="o">=</span> <span class="s">"setOnRefreshListener"</span><span class="o">),</span>
    <span class="nd">@BindingMethod</span><span class="o">(</span><span class="n">type</span> <span class="o">=</span> <span class="n">RecyclerView</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">attribute</span> <span class="o">=</span> <span class="s">"android:adapter"</span><span class="o">,</span> <span class="n">method</span> <span class="o">=</span> <span class="s">"setAdapter"</span><span class="o">)</span>
<span class="o">})</span>
<span class="kd">public</span> <span class="kd">final</span> <span class="kd">class</span> <span class="nc">ViewBindingUtils</span> <span class="o">{</span>
<span class="o">}</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">SampleActivityHandlers</span> <span class="o">{</span>
  <span class="kt">void</span> <span class="nf">onRefresh</span><span class="o">();</span>
<span class="o">}</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;layout&gt;</span>
  <span class="nt">&lt;data&gt;</span>
    <span class="nt">&lt;variable</span> <span class="na">name=</span><span class="s">"handlers"</span>
      <span class="na">type=</span><span class="s">"info.izumin.android.databindingsample.SampleActivityHandlers"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;variable</span> <span class="na">name=</span><span class="s">"adapter"</span>
      <span class="na">type=</span><span class="s">"android.support.v7.widget.RecyclerView.Adapter"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/data&gt;</span>
  <span class="nt">&lt;android.support.v4.widget.SwipeRefreshLayout</span>
    <span class="na">android:onRefresh=</span><span class="s">"@{handlers.onRefresh}"</span> <span class="nt">&gt;</span>

    <span class="nt">&lt;android.support.v7.widget.RecyclerView</span>
      <span class="na">android:adapter=</span><span class="s">"@{adapter}"</span> <span class="nt">/&gt;</span>

  <span class="nt">&lt;/android.support.v4.widget.SwipeRefreshLayout&gt;</span>
<span class="nt">&lt;/layout&gt;</span></code></pre></figure>

<p>이렇게까지 해야할 필요성이 있는지 모르겠다.</p>

<h4 id="image-source-binding">Image Source Binding</h4>

<p>“어떤 값에 따라 표시하는 이미지를 바꿀 수 없을까?”같은 것도 <code class="highlighter-rouge">BindingAdapter</code>를 이용하면 쉽게 할 수 있다. 정적 메소드이기 때문에 테스트도 편하게 할 수 있지 않을까?</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">final</span> <span class="kd">class</span> <span class="nc">ViewBindingUtils</span> <span class="o">{</span>
  <span class="nd">@BindingAdapter</span><span class="o">(</span><span class="s">"signalStrength"</span><span class="o">)</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">setSignalStrengthIcon</span><span class="o">(</span><span class="n">ImageView</span> <span class="n">imageView</span><span class="o">,</span> <span class="n">BluetoothDevice</span> <span class="n">device</span><span class="o">)</span> <span class="o">{</span>
    <span class="kt">int</span> <span class="n">resId</span> <span class="o">=</span> <span class="n">R</span><span class="o">.</span><span class="na">mipmap</span><span class="o">.</span><span class="na">ic_signal_weak</span><span class="o">;</span>
    <span class="kd">final</span> <span class="kt">int</span> <span class="n">rssi</span> <span class="o">=</span> <span class="n">device</span><span class="o">.</span><span class="na">getRssi</span><span class="o">();</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">rssi</span> <span class="o">&gt;=</span> <span class="o">-</span><span class="mi">40</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">resId</span> <span class="o">=</span> <span class="n">R</span><span class="o">.</span><span class="na">mipmap</span><span class="o">.</span><span class="na">ic_signal_strong</span><span class="o">;</span>
    <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">rssi</span> <span class="o">&lt;</span> <span class="o">-</span><span class="mi">40</span> <span class="o">&amp;&amp;</span> <span class="n">rssi</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">60</span><span class="o">){</span>
      <span class="n">resId</span> <span class="o">=</span> <span class="n">R</span><span class="o">.</span><span class="na">mipmap</span><span class="o">.</span><span class="na">ic_signal_medium</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="n">imageView</span><span class="o">.</span><span class="na">setImageResource</span><span class="o">(</span><span class="n">resId</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;layout&gt;</span>
  <span class="nt">&lt;data&gt;</span>
    <span class="nt">&lt;variable</span> <span class="na">name=</span><span class="s">"device"</span> <span class="na">type=</span><span class="s">"android.bluetooth.BluetoothDevice"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/data&gt;</span>
  <span class="nt">&lt;LinearLayout&gt;</span>
    <span class="nt">&lt;ImageView</span> <span class="na">app:signalStrength=</span><span class="s">"@{device}"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;TextView</span> <span class="na">android:text=</span><span class="s">"@{device.getName()}"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;TextView</span> <span class="na">android:text=</span><span class="s">"@{device.getAddress()}"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/LinearLayout&gt;</span>
<span class="nt">&lt;/layout&gt;</span></code></pre></figure>

<p><code class="highlighter-rouge">BindingAdapter</code>로 namespace를 쓰지 않는 것(<code class="highlighter-rouge">app</code>)과, <code class="highlighter-rouge">android</code>를 쓰는 것 중 어느 쪽이 좋은가요?</p>

<h4 id="data-binding-on-custom-view">Data Binding on Custom View</h4>

<p>당연하게도 Data Binding은 Custom View에서도 쓸 수 있다. <code class="highlighter-rouge">@BindingAdapter</code>를 잘못 사용하면 <code class="highlighter-rouge">attrs.xml</code>을 쓰고 <code class="highlighter-rouge">TypedArray</code>에서 Custom Attrs를 얻는 등의 일을 쉽게 할 수 있다. <del>그게 좋은지 나쁜지는 다른 문제로 두고</del>.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Pagination</span> <span class="kd">extends</span> <span class="n">RelativeLayout</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="n">ViewPaginationBinding</span> <span class="n">binding</span><span class="o">;</span>

  <span class="kd">public</span> <span class="nf">Pagination</span><span class="o">(</span><span class="n">Context</span> <span class="n">context</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">(</span><span class="n">context</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="nf">Pagination</span><span class="o">(</span><span class="n">Context</span> <span class="n">context</span><span class="o">,</span> <span class="n">AttributeSet</span> <span class="n">attrs</span><span class="o">)</span> <span class="o">{</span>
    <span class="kd">super</span><span class="o">(</span><span class="n">context</span><span class="o">,</span> <span class="n">attrs</span><span class="o">);</span>
    <span class="n">binding</span> <span class="o">=</span> <span class="n">DataBindingUtil</span><span class="o">.</span><span class="na">inflate</span><span class="o">(</span><span class="n">LayoutInflater</span><span class="o">.</span><span class="na">from</span><span class="o">(</span><span class="n">context</span><span class="o">),</span> <span class="n">R</span><span class="o">.</span><span class="na">layout</span><span class="o">.</span><span class="na">view_pagination</span><span class="o">,</span> <span class="k">this</span><span class="o">,</span> <span class="kc">true</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">setListener</span><span class="o">(</span><span class="n">Pagination</span> <span class="n">paginate</span><span class="o">,</span> <span class="n">View</span> <span class="n">target</span><span class="o">,</span> <span class="n">OnPaginationClickListener</span> <span class="n">listener</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">listener</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">target</span><span class="o">.</span><span class="na">setOnClickListener</span><span class="o">(</span><span class="n">_v</span> <span class="o">-&gt;</span> <span class="n">listener</span><span class="o">.</span><span class="na">onClick</span><span class="o">(</span><span class="n">paginate</span><span class="o">));</span>
    <span class="o">}</span>
  <span class="o">}</span>

  <span class="nd">@BindingAdapter</span><span class="o">({</span><span class="s">"android:onPrevButtonClicked"</span><span class="o">})</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">setPrevClickListener</span><span class="o">(</span><span class="n">Pagination</span> <span class="n">view</span><span class="o">,</span> <span class="n">OnPaginationClickListener</span> <span class="n">listener</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">setListener</span><span class="o">(</span><span class="n">view</span><span class="o">,</span> <span class="n">view</span><span class="o">.</span><span class="na">binding</span><span class="o">.</span><span class="na">btnPrevPage</span><span class="o">,</span> <span class="n">listener</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="nd">@BindingAdapter</span><span class="o">({</span><span class="s">"android:onNextButtonClicked"</span><span class="o">})</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">setNextClickListener</span><span class="o">(</span><span class="n">Pagination</span> <span class="n">view</span><span class="o">,</span> <span class="n">OnPaginationClickListener</span> <span class="n">listener</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">setListener</span><span class="o">(</span><span class="n">view</span><span class="o">,</span> <span class="n">view</span><span class="o">.</span><span class="na">binding</span><span class="o">.</span><span class="na">btnNextPage</span><span class="o">,</span> <span class="n">listener</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="kd">interface</span> <span class="nc">OnPaginationClickListener</span> <span class="o">{</span>
    <span class="kt">void</span> <span class="nf">onClick</span><span class="o">(</span><span class="n">Pagination</span> <span class="n">pagination</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<h3 id="butterknife-data-binding----">ButterKnife에서 Data Binding으로 대체할 수 없는 기능들</h3>

<h4 id="resource-binding">Resource Binding</h4>

<p>이 기능은 Data Binding에는 존재하지 않는다.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">class</span> <span class="nc">ExampleActivity</span> <span class="kd">extends</span> <span class="n">Activity</span> <span class="o">{</span>
  <span class="nd">@BindString</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">string</span><span class="o">.</span><span class="na">title</span><span class="o">)</span> <span class="n">String</span> <span class="n">title</span><span class="o">;</span>
  <span class="nd">@BindDrawable</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">drawable</span><span class="o">.</span><span class="na">graphic</span><span class="o">)</span> <span class="n">Drawable</span> <span class="n">graphic</span><span class="o">;</span>
  <span class="nd">@BindColor</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">color</span><span class="o">.</span><span class="na">red</span><span class="o">)</span> <span class="kt">int</span> <span class="n">red</span><span class="o">;</span> <span class="c1">// int or ColorStateList field</span>
  <span class="nd">@BindDimen</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">dimen</span><span class="o">.</span><span class="na">spacer</span><span class="o">)</span> <span class="n">Float</span> <span class="n">spacer</span><span class="o">;</span> <span class="c1">// int (for pixel size) or float (for exact value) field</span>
  <span class="c1">// ...</span>
<span class="o">}</span></code></pre></figure>

<h4 id="view-lists">View Lists</h4>

<p>View Lists는 여러 View를 한 곳에 모아 처리하는 기능 같다. <del>이 글을 쓸 때 처음 안 기능이다</del>.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="c1">// 이렇게 해서…</span>
<span class="nd">@Bind</span><span class="o">({</span> <span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">first_name</span><span class="o">,</span> <span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">middle_name</span><span class="o">,</span> <span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">last_name</span> <span class="o">})</span>
<span class="n">List</span><span class="o">&lt;</span><span class="n">EditText</span><span class="o">&gt;</span> <span class="n">nameViews</span><span class="o">;</span>

<span class="c1">// 이런 것들을 준비해주면…</span>
<span class="kd">static</span> <span class="kd">final</span> <span class="n">ButterKnife</span><span class="o">.</span><span class="na">Action</span><span class="o">&lt;</span><span class="n">View</span><span class="o">&gt;</span> <span class="n">DISABLE</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ButterKnife</span><span class="o">.</span><span class="na">Action</span><span class="o">&lt;</span><span class="n">View</span><span class="o">&gt;()</span> <span class="o">{</span>
  <span class="nd">@Override</span> <span class="kd">public</span> <span class="kt">void</span> <span class="nf">apply</span><span class="o">(</span><span class="n">View</span> <span class="n">view</span><span class="o">,</span> <span class="kt">int</span> <span class="n">index</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">view</span><span class="o">.</span><span class="na">setEnabled</span><span class="o">(</span><span class="kc">false</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">};</span>

<span class="c1">// 이런 느낌으로 한번에 쓸 수 있다！</span>
<span class="n">ButterKnife</span><span class="o">.</span><span class="na">apply</span><span class="o">(</span><span class="n">nameViews</span><span class="o">,</span> <span class="n">DISABLE</span><span class="o">);</span></code></pre></figure>

<p>이것도 Data Binding에서는 존재하지 않는다.</p>

<h2 id="section">정리</h2>
<ul>
  <li>ButterKnife의 기능은 대체로 Data Binding으로 대체할 수 있다.
    <ul>
      <li>Resource Binding, View Lists만 Data Binding에서 대체 불가</li>
    </ul>
  </li>
  <li><code class="highlighter-rouge">ViewHolder</code> 패턴은 모두 대체할 수 있다.
    <ul>
      <li><code class="highlighter-rouge">RecyclerView.ViewHolder</code>는 Binding의 Wrapper로 감싸주면 OK</li>
    </ul>
  </li>
  <li><code class="highlighter-rouge">@BindingAdapter</code>와 <code class="highlighter-rouge">@BindingMethod</code>를 <del>악용</del>이용하면 비교적 뭐든지 할 수 있다.</li>
</ul>

<h2 id="references">References</h2>
<ul>
  <li><a href="http://jakewharton.github.io/butterknife/">ButterKnife</a></li>
  <li><a href="http://developer.android.com/tools/data-binding/guide.html">Data Binding Guide - Android Developers</a></li>
  <li><a href="http://tech.recruit-mp.co.jp/mobile/android-data-binding/">Android – Data Binding 연결해봤다. – NET BIZ DIV. TECH BLOG</a></li>
  <li><a href="http://blog.8thlight.com/uncle-bob/2012/08/13/the-clean-architecture.html">The Clean Architecture - 8th Light</a></li>
  <li><a href="https://android.googlesource.com/platform/frameworks/data-binding/+/android-6.0.0_r7/extensions/baseAdapters/src/main/java/android/databinding/adapters">extensions/baseAdapters/src/main/java/android/databinding/adapters - platform/frameworks/data-binding - Git at Google</a></li>
</ul>

        </section>
        <footer class="post-footer">
          <section class="share">
            
              
                <a class="icon-twitter" href="http://twitter.com/share?text=%5B%EB%B2%88%EC%97%AD%5D+ButterKnife%2C+%EC%A7%80%EA%B8%88%EA%B9%8C%EC%A7%80+%EA%B3%A0%EB%A7%88%EC%9B%A0%EC%96%B4.+Data+Binding%2C+%EC%95%9E%EC%9C%BC%EB%A1%9C+%EC%9E%98+%EB%B6%80%ED%83%81%ED%95%B4.&amp;url=http://realignist.me/code/2016/05/25/data-binding-guide"
                  onclick="window.open(this.href, 'twitter-share', 'width=550,height=255');return false;">
                <i class="fa fa-twitter"></i><span class="hidden">twitter</span>
                </a>
              
            
              
                <a class="icon-facebook" href="https://www.facebook.com/sharer.php?t=%5B%EB%B2%88%EC%97%AD%5D+ButterKnife%2C+%EC%A7%80%EA%B8%88%EA%B9%8C%EC%A7%80+%EA%B3%A0%EB%A7%88%EC%9B%A0%EC%96%B4.+Data+Binding%2C+%EC%95%9E%EC%9C%BC%EB%A1%9C+%EC%9E%98+%EB%B6%80%ED%83%81%ED%95%B4.&amp;u=http://realignist.me/code/2016/05/25/data-binding-guide"
                  onclick="window.open(this.href, 'facebook-share', 'width=550,height=255');return false;">
                <i class="fa fa-facebook"></i><span class="hidden">facebook</span>
                </a>
              
            
              
            
          </section>
        </footer>
        <div class="bottom-teaser cf">
          <div class="isLeft">
            <h5 class="index-headline featured"><span>Written by</span></h5>
            <section class="author">
              <div class="author-image" style="background-image: url(/assets/images/author.jpg)">Blog Logo</div>
              <h4>Haze Lee</h4>
              <p class="bio"></p>
              <hr>
              <p class="published">Published <time datetime="2016-05-25 15:00">25 May 2016</time></p>
            </section>
          </div>
          
          <div class="isRight">
            <h5 class="index-headline featured"><span>Supported by</span></h5>
            <footer class="site-footer">
              <section class="poweredby">Proudly published with <a href="http://jekyllrb.com"> Jekyll</a></section>
              <a class="subscribe" href="/feed.xml"> <span class="tooltip"> <i class="fa fa-rss"></i> You should subscribe to my feed.</span></a>
              <div class="inner">
                <section class="copyright">All content copyright <a href="/">Haze Lee</a> &copy; 2017<br>All rights reserved.</section>
              </div>
            </footer>
          </div>
        </div>
        
        <div id="disqus_thread"></div>
        <script type="text/javascript">
            /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
            var disqus_shortname = 'realignist'; // required: replace example with your forum shortname

            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function() {
                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        
      </article>
    </main>
    <div class="bottom-closer">
      <div class="background-closer-image"  style="background-image: url(/assets/images/background.jpg)">
        Image
      </div>
      <div class="inner">
        <h1 class="blog-title">Haze Lee</h1>
        <h2 class="blog-description">책, 음악, 코딩, 피카츄와 함께하는 곳.</h2>
        <a href="/" class="btn">Back to Overview</a>
      </div>
    </div>
    <script src="https://code.jquery.com/jquery-1.11.1.min.js"></script>
<script type="text/javascript" src="/assets/js/jquery.fitvids.js"></script>
<script type="text/javascript" src="/assets/js/index.js"></script>
<script type="text/javascript" src="/assets/js/readingTime.min.js"></script>
<script type="text/javascript" src="/assets/js/prism.js"></script>
<script>
(function ($) {
  "use strict";
  $(document).ready(function(){

    var $window = $(window),
    $image = $('.post-image-image, .teaserimage-image');
    
      $window.on('scroll', function() {
        var top = $window.scrollTop();

        if (top < 0 || top > 1500) { return; }
        $image
          .css('transform', 'translate3d(0px, '+top/3+'px, 0px)')
          .css('opacity', 1-Math.max(top/700, 0));
      });
      $window.trigger('scroll');

      var height = $('.article-image').height();
      $('.post-content').css('padding-top', height + 'px');

      $('a[href*=#]:not([href=#])').click(function() {
        if (location.pathname.replace(/^\//,'') == this.pathname.replace(/^\//,'')
         && location.hostname == this.hostname) {
          var target = $(this.hash);
          target = target.length ? target : $('[name=' + this.hash.slice(1) +']');
          if (target.length) {
            $('html,body').animate({ scrollTop: target.offset().top }, 500);
            return false;
          }
        }
      });

  });
}(jQuery));
</script>
<script type="text/javascript" src="/assets/js/prism.js"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-62976426-1', 'auto');
  ga('send', 'pageview');

</script>

  </body>
</html>
